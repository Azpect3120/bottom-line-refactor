<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/main.css">
    <title>Workload: Sales Tax</title>
</head>
<body>

    <!-- Body -->
    <div class="w-full h-screen bg-x-theme-background">

        <!-- Sidebar -->
        <%- include("../partials/sidebar", { user }) %>

        <!-- Page Body -->
        <div class="w-5/6 ml-auto h-full flex flex-col justify-center items-center">

            <!-- Page Content -->
            <div class="w-11/12 h-5/6 bg-x-theme-popup-background border border-x-theme-border rounded-xl">
               <!-- Header  -->
                <div class="h-1/6 w-full flex items-center px-8">
                    <!-- Update to hold current year -->
                    <h1 class="text-2xl text-x-theme-text-active w-1/3"> Sales Tax Workload (2023) </h1>

                    <form action="" method="GET" class="w-2/3 flex justify-end">
                        <input
                            type="text"
                            name="search"
                            class="bg-x-theme-mini-popup-background border border-x-theme-border text-x-theme-text-base px-2 py-1.5 rounded-md text-xs outline-none w-1/2"
                            placeholder="Search for client..."
                        >
                            
                        <select name="year" class="bg-x-theme-buttons rounded-md text-xs text-x-theme-text-active py-1.5 px-2 ml-4">
                            <option value="2023"> 2023 </option>
                            <option value="2022"> 2022 </option>
                            <option value="2021"> 2021 </option>
                            <option value="2020"> 2020 </option>
                            <option value="2019"> 2019 </option>
                            <option value="2018"> 2018 </option>
                        </select>

                        <button type="submit" class="text-xs bg-x-theme-buttons text-x-theme-text-active mx-4 px-2 py-1.5 rounded-md border border-x-theme-buttons hover:bg-x-theme-buttons-active hover:border-x-theme-buttons-active transition-all duration-300 outline-none"> Search </button>
                    </form>
               </div>
               
               <!-- Main Table -->
               <div class="w-full h-5/6 overflow-y-auto">
                    <table class="w-full">
                        <tr class="text-x-theme-text-base">
                            <th class="pb-4 text-left pl-8"> Client Name </th>
                            <th class="pb-4"> Frequency </th>
                            <th class="pb-4"> Jan </th>
                            <th class="pb-4"> Feb </th>
                            <th class="pb-4"> Mar </th>
                            <th class="pb-4"> Apr </th>
                            <th class="pb-4"> May </th>
                            <th class="pb-4"> Jun </th>
                            <th class="pb-4"> Jul </th>
                            <th class="pb-4"> Aug </th>
                            <th class="pb-4"> Sep </th>
                            <th class="pb-4"> Oct </th>
                            <th class="pb-4"> Nov </th>
                            <th class="pb-4"> Dec </th>
                            <th class="pb-4 pr-5"> Update </th>
                        </tr>
                        
                        <% for (let i = 0; i < 20; i++) { %>
                        <form action="/dash/workloads/sales-tax/update" method="POST">
                            <tr class="text-x-theme-text-base border-y border-x-theme-border hover:bg-x-theme-mini-popup-background">
                                <td class="text-left pl-8 py-4"> Arrowhead Chlorination </td>
                                <td class="text-center"> Quarterly </td>

                                <input type="hidden" name="id" value="client_id" />
                                <input type="hidden" name="year" value="2023" />

                                <td onclick="toggleCheckmark('client_id_jan');" class="text-center"> 
                                    <ion-icon id="client_id_jan" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_jan_input" name="jan" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_feb');" class="text-center"> 
                                    <ion-icon id="client_id_feb" name="checkmark-sharp" class="hidden"></ion-icon> 
                                    <input type="hidden" id="client_id_feb_input" name="feb" value="not-checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_mar');" class="text-center"> 
                                    <ion-icon id="client_id_mar" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_mar_input" name="mar" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_apr');" class="text-center"> 
                                    <ion-icon id="client_id_apr" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_apr_input" name="apr" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_may');" class="text-center"> 
                                    <ion-icon id="client_id_may" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_may_input" name="may" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_jun');" class="text-center"> 
                                    <ion-icon id="client_id_jun" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_jun_input" name="jun" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_jul');" class="text-center"> 
                                    <ion-icon id="client_id_jul" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_jul_input" name="jul" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_aug');" class="text-center"> 
                                    <ion-icon id="client_id_aug" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_aug_input" name="aug" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_sep');" class="text-center"> 
                                    <ion-icon id="client_id_sep" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_sep_input" name="sep" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_oct');" class="text-center"> 
                                    <ion-icon id="client_id_oct" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_oct_input" name="oct" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_nov');" class="text-center"> 
                                    <ion-icon id="client_id_nov" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_nov_input" name="nov" value="checked" />
                                </td>
                                <td onclick="toggleCheckmark('client_id_dec');" class="text-center"> 
                                    <ion-icon id="client_id_dec" name="checkmark-sharp"></ion-icon> 
                                    <input type="hidden" id="client_id_dec_input" name="dec" value="checked" />
                                </td>
                                <td class="text-center pr-5">
                                    <button type="submit" title="Update client" class="text-2xl hover:text-x-theme-text-active transition-all">
                                        <ion-icon name="cloud-upload"></ion-icon>
                                    </button>
                                </td>
                            </tr>
                        </form>
                        <% } %>
               </div>
            </div>


        </div>
    </div>

    <script>
        function toggleCheckmark (id)
        {
            const el = document.getElementById(id);
            const inp = document.getElementById(id + "_input");
            if (el.classList.contains("hidden")) {
                el.classList.remove("hidden");
                inp.value = "checked";
            } else {
                el.classList.add("hidden");
                inp.value = "not-checked";
            }
        }
    </script>
    

    <!-- Icon imports -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>
